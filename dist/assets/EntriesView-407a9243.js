import{_ as Pe,j as Fe}from"./EventSelect.vue_vue_type_script_setup_true_lang-15af2338.js";import{d as E,p as u,I as Ae,s as te,t as Ue,v as me,Y as _e,r as P,z as Ee,L as $e,Z as w,h as He,O as je,y as Le,a0 as re,au as ze,n as le,av as Ge,P as ae,R as ie,aw as ue,C as R,D as Ke,ax as We,B as ve,ay as Xe,ao as Ye,u as Ze,i as qe,a as Je,c as Qe,b as x,w as _,e as I,g as Z,N as en}from"./index-356ebbb4.js";import{u as nn,a as tn,N as oe}from"./text-27da44a1.js";import{N as rn}from"./Card-0bf47129.js";const ln=E({name:"Add",render(){return u("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),an=E({name:"Remove",render(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},u("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function un(n){return n==null||typeof n=="string"&&n.trim()===""?null:Number(n)}function on(n){return n.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(n)||/^\.\d+$/.test(n))}function q(n){return n==null?!0:!Number.isNaN(n)}function se(n,a){return n==null?"":a===void 0?String(n):n.toFixed(a)}function J(n){if(n===null)return null;if(typeof n=="number")return n;{const a=Number(n);return Number.isNaN(a)?null:a}}const sn=Ae([te("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),te("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),de=800,fe=100,dn=Object.assign(Object.assign({},me.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),ce=E({name:"InputNumber",props:dn,setup(n){const{mergedBorderedRef:a,mergedClsPrefixRef:f,mergedRtlRef:V}=Ue(n),l=me("InputNumber","-input-number",sn,ze,n,f),{localeRef:v}=nn("InputNumber"),h=_e(n),{mergedSizeRef:o,mergedDisabledRef:s,mergedStatusRef:M}=h,d=P(null),$=P(null),S=P(null),T=P(n.defaultValue),pe=Ee(n,"value"),p=$e(pe,T),y=P(""),H=e=>{const t=String(e).split(".")[1];return t?t.length:0},ge=e=>{const t=[n.min,n.max,n.step,e].map(r=>r===void 0?0:H(r));return Math.max(...t)},he=w(()=>{const{placeholder:e}=n;return e!==void 0?e:v.value.placeholder}),F=w(()=>{const e=J(n.step);return e!==null?e===0?1:Math.abs(e):1}),Q=w(()=>{const e=J(n.min);return e!==null?e:null}),ee=w(()=>{const e=J(n.max);return e!==null?e:null}),k=e=>{const{value:t}=p;if(e===t){N();return}const{"onUpdate:value":r,onUpdateValue:i,onChange:m}=n,{nTriggerFormInput:g,nTriggerFormChange:B}=h;m&&R(m,e),i&&R(i,e),r&&R(r,e),T.value=e,g(),B()},c=({offset:e,doUpdateIfValid:t,fixPrecision:r,isInputing:i})=>{const{value:m}=y;if(i&&on(m))return!1;const g=(n.parse||un)(m);if(g===null)return t&&k(null),null;if(q(g)){const B=H(g),{precision:O}=n;if(O!==void 0&&O<B&&!r)return!1;let b=parseFloat((g+e).toFixed(O??ge(g)));if(q(b)){const{value:X}=ee,{value:Y}=Q;if(X!==null&&b>X){if(!t||i)return!1;b=X}if(Y!==null&&b<Y){if(!t||i)return!1;b=Y}return n.validator&&!n.validator(b)?!1:(t&&k(b),b)}}return!1},N=()=>{const{value:e}=p;if(q(e)){const{format:t,precision:r}=n;t?y.value=t(e):e===null||r===void 0||H(e)>r?y.value=se(e,void 0):y.value=se(e,r)}else y.value=String(e)};N();const be=w(()=>c({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),j=w(()=>{const{value:e}=p;if(n.validator&&e===null)return!1;const{value:t}=F;return c({offset:-t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),L=w(()=>{const{value:e}=p;if(n.validator&&e===null)return!1;const{value:t}=F;return c({offset:+t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function xe(e){const{onFocus:t}=n,{nTriggerFormFocus:r}=h;t&&R(t,e),r()}function ye(e){var t,r;if(e.target===((t=d.value)===null||t===void 0?void 0:t.wrapperElRef))return;const i=c({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(i!==!1){const B=(r=d.value)===null||r===void 0?void 0:r.inputElRef;B&&(B.value=String(i||"")),p.value===i&&N()}else N();const{onBlur:m}=n,{nTriggerFormBlur:g}=h;m&&R(m,e),g(),Ke(()=>{N()})}function we(e){const{onClear:t}=n;t&&R(t,e)}function z(){const{value:e}=L;if(!e){W();return}const{value:t}=p;if(t===null)n.validator||k(ne());else{const{value:r}=F;c({offset:r,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function G(){const{value:e}=j;if(!e){K();return}const{value:t}=p;if(t===null)n.validator||k(ne());else{const{value:r}=F;c({offset:-r,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Ie=xe,Ve=ye;function ne(){if(n.validator)return null;const{value:e}=Q,{value:t}=ee;return e!==null?Math.max(0,e):t!==null?Math.min(0,t):0}function Ne(e){we(e),k(null)}function Be(e){var t,r,i;!((t=S.value)===null||t===void 0)&&t.$el.contains(e.target)&&e.preventDefault(),!((r=$.value)===null||r===void 0)&&r.$el.contains(e.target)&&e.preventDefault(),(i=d.value)===null||i===void 0||i.activate()}let C=null,D=null,A=null;function K(){A&&(window.clearTimeout(A),A=null),C&&(window.clearInterval(C),C=null)}function W(){U&&(window.clearTimeout(U),U=null),D&&(window.clearInterval(D),D=null)}function Re(){K(),A=window.setTimeout(()=>{C=window.setInterval(()=>{G()},fe)},de),le("mouseup",document,K,{once:!0})}let U=null;function Me(){W(),U=window.setTimeout(()=>{D=window.setInterval(()=>{z()},fe)},de),le("mouseup",document,W,{once:!0})}const Se=()=>{D||z()},Te=()=>{C||G()};function ke(e){var t,r;if(e.key==="Enter"){if(e.target===((t=d.value)===null||t===void 0?void 0:t.wrapperElRef))return;c({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((r=d.value)===null||r===void 0||r.deactivate())}else if(e.key==="ArrowUp"){if(!L.value||n.keyboard.ArrowUp===!1)return;e.preventDefault(),c({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}else if(e.key==="ArrowDown"){if(!j.value||n.keyboard.ArrowDown===!1)return;e.preventDefault(),c({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&G()}}function Ce(e){y.value=e,n.updateValueOnInput&&!n.format&&!n.parse&&n.precision===void 0&&c({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}He(p,()=>{N()});const De={focus:()=>{var e;return(e=d.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=d.value)===null||e===void 0?void 0:e.blur()}},Oe=je("InputNumber",V,f);return Object.assign(Object.assign({},De),{rtlEnabled:Oe,inputInstRef:d,minusButtonInstRef:$,addButtonInstRef:S,mergedClsPrefix:f,mergedBordered:a,uncontrolledValue:T,mergedValue:p,mergedPlaceholder:he,displayedValueInvalid:be,mergedSize:o,mergedDisabled:s,displayedValue:y,addable:L,minusable:j,mergedStatus:M,handleFocus:Ie,handleBlur:Ve,handleClear:Ne,handleMouseDown:Be,handleAddClick:Se,handleMinusClick:Te,handleAddMousedown:Me,handleMinusMousedown:Re,handleKeyDown:ke,handleUpdateDisplayedValue:Ce,mergedTheme:l,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:Le(()=>{const{self:{iconColorDisabled:e}}=l.value,[t,r,i,m]=Ge(e);return{textColorTextDisabled:`rgb(${t}, ${r}, ${i})`,opacityDisabled:`${m}`}})})},render(){const{mergedClsPrefix:n,$slots:a}=this,f=()=>u(ue,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ae(a["minus-icon"],()=>[u(ie,{clsPrefix:n},{default:()=>u(an,null)})])}),V=()=>u(ue,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ae(a["add-icon"],()=>[u(ie,{clsPrefix:n},{default:()=>u(ln,null)})])});return u("div",{class:[`${n}-input-number`,this.rtlEnabled&&`${n}-input-number--rtl`]},u(tn,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var l;return this.showButton&&this.buttonPlacement==="both"?[f(),re(a.prefix,v=>v?u("span",{class:`${n}-input-number-prefix`},v):null)]:(l=a.prefix)===null||l===void 0?void 0:l.call(a)},suffix:()=>{var l;return this.showButton?[re(a.suffix,v=>v?u("span",{class:`${n}-input-number-suffix`},v):null),this.buttonPlacement==="right"?f():null,V()]:(l=a.suffix)===null||l===void 0?void 0:l.call(a)}}))}});function fn(){const n=ve(Xe,null);return n===null&&We("use-notification","No outer `n-notification-provider` found."),n}const cn=Ye("entry",()=>{const n=ve("axios");async function a(f){return(await n.put("/entry",f).catch(l=>{console.error(l)})).data}return{createOrUpdateEntry:a}}),mn={class:"flex items-center justify-center"},bn=E({__name:"EntriesView",setup(n){const a=Ze(),f=cn(),V=fn(),l=qe({candidate:0,boulder:0,sent:!1,currentEventId:void 0});async function v(){var S;const{candidate:h,boulder:o,sent:s}=l,M=Number(l.currentEventId),d=(S=a.user)==null?void 0:S.Referee.find(T=>T.eventId===M);if(!h||!o||!M||!d)return;(await f.createOrUpdateEntry({sent:s,eventId:M,candidateNumber:h,boulderNumber:o,refereeId:d.id})).id&&V.success({content:"Entrada registrada com sucesso!",duration:2e3,keepAliveOnHover:!0}),console.log("@@",l)}return(h,o)=>(Je(),Qe("main",mn,[x(I(rn),{size:"medium",class:"max-w-[500px]",embedded:"",title:"Registrar tentativa","content-style":"display: flex; flex-direction: column; gap: 16px;"},{default:_(()=>[x(Pe,{modelValue:l.currentEventId,"onUpdate:modelValue":o[0]||(o[0]=s=>l.currentEventId=s),"only-active":""},null,8,["modelValue"]),x(I(oe),{tag:"label"},{default:_(()=>[Z(" Número do candidato "),x(I(ce),{value:l.candidate,"onUpdate:value":o[1]||(o[1]=s=>l.candidate=s),class:"mt-1",placeholder:"Digite o número do candidato"},null,8,["value"])]),_:1}),x(I(oe),{tag:"label"},{default:_(()=>[Z(" Número do boulder "),x(I(ce),{value:l.boulder,"onUpdate:value":o[2]||(o[2]=s=>l.boulder=s),class:"mt-1",type:"password",placeholder:"Digite o número do boulder"},null,8,["value"])]),_:1}),x(I(Fe),{label:"mandou?",checked:l.sent,"onUpdate:checked":o[3]||(o[3]=s=>l.sent=s)},null,8,["checked"]),x(I(en),{onClick:v},{default:_(()=>[Z(" Registrar ")]),_:1})]),_:1})]))}});export{bn as default};
